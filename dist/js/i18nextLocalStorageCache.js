!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):e.i18nextLocalStorageCache=n()}(this,(function(){"use strict";var e=[],n=e.forEach,t=e.slice;function i(e){return n.call(t.call(arguments,1),(function(n){if(n)for(var t in n)void 0===e[t]&&(e[t]=n[t])})),e}function o(e,n,t){var i;return function(){var o=this,r=arguments,a=function(){i=null,t||e.apply(o,r)},c=t&&!i;clearTimeout(i),i=setTimeout(a,n),c&&e.apply(o,r)}}var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var c=function(e,n){if(window.localStorage)try{window.localStorage.setItem(e,n)}catch(e){}},s=function(e,n){if(window.localStorage)try{return window.localStorage.getItem(e,n)}catch(e){}};var l=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this.init(n,t),this.type="cache",this.debouncedStore=o(this.store,1e4)}return r(e,[{key:"init",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=e,this.options=i(n,this.options||{},{enabled:!1,prefix:"i18next_res_",expirationTime:6048e5,versions:{}})}},{key:"load",value:function(e,n){var t=this,i={},o=(new Date).getTime();if(!window.localStorage||!e.length)return n(null,null);var r=e.length;e.forEach((function(e){var a=s(t.options.prefix+e);a&&(a=JSON.parse(a)).i18nStamp&&a.i18nStamp+t.options.expirationTime>o&&t.options.versions[e]===a.i18nVersion&&(delete a.i18nVersion,i[e]=a),0===(r-=1)&&n(null,i)}))}},{key:"store",value:function(e){var n=e;if(window.localStorage)for(var t in n)n[t].i18nStamp=(new Date).getTime(),this.options.versions[t]&&(n[t].i18nVersion=this.options.versions[t]),c(this.options.prefix+t,JSON.stringify(n[t]))}},{key:"save",value:function(e){this.debouncedStore(e)}}]),e}();return l.type="cache",l}));